###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.1.53127/W32 for ARM     01/Apr/2013  10:24:17 #
# Copyright 1999-2011 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  L:\git_workspace\YD_PRJ_NEW_20130323_git_\Source\Source_ #
#                    MQX\USB_Task.c                                           #
#    Command line =  L:\git_workspace\YD_PRJ_NEW_20130323_git_\Source\Source_ #
#                    MQX\USB_Task.c -D _DEBUG=1 -lC                           #
#                    "L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\twrk60n51 #
#                    2\Int Flash Debug\List\" -lA                             #
#                    "L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\twrk60n51 #
#                    2\Int Flash Debug\List\" --diag_suppress                 #
#                    Pa039,Pa082,Pe186 -o "L:\git_workspace\YD_PRJ_NEW_201303 #
#                    23_git_\IAR\twrk60n512\Int Flash Debug\Obj\" --no_cse    #
#                    --no_unroll --no_inline --no_code_motion --no_tbaa       #
#                    --no_clustering --no_scheduling --debug --endian=little  #
#                    --cpu=Cortex-M4 -e --fpu=None --dlib_config "D:\Program  #
#                    Files\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\INC\c\DLib_Config_Normal.h" -I                   #
#                    L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\..\lib\twr #
#                    k60n512.iar\ -I L:\git_workspace\YD_PRJ_NEW_20130323_git #
#                    _\IAR\..\lib\twrk60n512.iar\bsp\ -I                      #
#                    L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\..\lib\twr #
#                    k60n512.iar\psp\ -I L:\git_workspace\YD_PRJ_NEW_20130323 #
#                    _git_\IAR\..\lib\twrk60n512.iar\bsp\Generated_Code\ -I   #
#                    L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\..\lib\twr #
#                    k60n512.iar\rtcs\ -I L:\git_workspace\YD_PRJ_NEW_2013032 #
#                    3_git_\IAR\..\lib\twrk60n512.iar\mfs\ -I                 #
#                    L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\..\lib\twr #
#                    k60n512.iar\usb\host\ -I L:\git_workspace\YD_PRJ_NEW_201 #
#                    30323_git_\IAR\..\lib\twrk60n512.iar\shell\ -I           #
#                    L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\..\lib\twr #
#                    k60n512.iar\usb\ -I L:\git_workspace\YD_PRJ_NEW_20130323 #
#                    _git_\IAR\..\ -I L:\git_workspace\YD_PRJ_NEW_20130323_gi #
#                    t_\IAR\..\Source\Source_MQX\ -I "E:\Freescale\Freescale  #
#                    MQX 3.8\shell\source\include\" -Ol --use_c++_inline      #
#    List file    =  L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\twrk60n512 #
#                    \Int Flash Debug\List\USB_Task.lst                       #
#    Object file  =  L:\git_workspace\YD_PRJ_NEW_20130323_git_\IAR\twrk60n512 #
#                    \Int Flash Debug\Obj\USB_Task.o                          #
#                                                                             #
#                                                                             #
###############################################################################

L:\git_workspace\YD_PRJ_NEW_20130323_git_\Source\Source_MQX\USB_Task.c
      1          /**HEADER********************************************************************
      2          * 
      3          * Copyright (c) 2008 Freescale Semiconductor;
      4          * All Rights Reserved
      5          *
      6          * Copyright (c) 2004-2008 Embedded Access Inc.;
      7          * All Rights Reserved
      8          *
      9          *************************************************************************** 
     10          *
     11          * THIS SOFTWARE IS PROVIDED BY FREESCALE "AS IS" AND ANY EXPRESSED OR 
     12          * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES 
     13          * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  
     14          * IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
     15          * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES 
     16          * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR 
     17          * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) 
     18          * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, 
     19          * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING 
     20          * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF 
     21          * THE POSSIBILITY OF SUCH DAMAGE.
     22          *
     23          **************************************************************************
     24          *
     25          * $FileName: USB_Task.c$
     26          * $Version : 3.6.13.0$
     27          * $Date    : Aug-25-2010$
     28          *
     29          * Comments:
     30          *
     31          *   This file is the main file for filesystem demo. Note that this example
     32          *   is a multi tasking example and needs an operating system to run. This 
     33          *   means that customers who are not using MQX should change the operating system
     34          *   dependent code. An attempt has been made to comment out the code
     35          *   however, a programmer must review all lines of code to ensure that
     36          *   it correctly compiles with their libraries of operating system and
     37          *   targetcompiler. This program has been compiled and tested for ARC AA3
     38          *   processor with MQX real time operating system.
     39          *
     40          *END************************************************************************/
     41          
     42          #include <string.h>
     43          #include <usb.h>
     44          #include <mqx_dll.h>
     45          #include <lwevent.h>
     46          
     47          #include <hostapi.h>
     48          #include <mqx_host.h>
     49          #include <host_ch9.h>
     50          #include <host_common.h>
     51          #include <usb_desc.h>
     52          #include <host_dev_list.h>
     53          #include <usb_host_msd_bo.h>
     54          #include <usb_host_hub_sm.h>
     55          
     56          #include "usb_task.h"
     57          #include "usb_file.h"
     58          
     59          #include <mfs.h>
     60          
     61          //#include "demo.h"
     62          #include "FTP_Task.h"

  #ifdef 0
         ^
"L:\git_workspace\YD_PRJ_NEW_20130323_git_\lib\twrk60n512.iar\rtcs\rtcscfg.h",183  Warning[Pe040]: 
          expected an identifier
     63          
     64          #define USB_EVENT 0x01
     65          
     66          #define _USB_DBUG_
     67          

   \                                 In section .bss, align 4
     68          LWEVENT_STRUCT USB_Event;
   \                     USB_Event:
   \   00000000                      DS8 36

   \                                 In section .bss, align 4
     69          LWSEM_STRUCT   USB_Stick;
   \                     USB_Stick:
   \   00000000                      DS8 28

   \                                 In section .bss, align 4
     70          pointer        USB_handle = NULL;
   \                     USB_handle:
   \   00000000                      DS8 4
     71          

   \                                 In section .bss, align 4
     72          volatile DEVICE_STRUCT device = { 0 }; 
   \                     device:
   \   00000000                      DS8 32
     73          
     74          /* Table of driver capabilities this application want to use */

   \                                 In section .rodata, align 4
     75          static const USB_HOST_DRIVER_INFO ClassDriverInfoTable[] =
   \                     ClassDriverInfoTable:
   \   00000000   0x00 0x00          DC8 0, 0, 0, 0, 8, 4, 80, 0
   \              0x00 0x00    
   \              0x08 0x04    
   \              0x50 0x00    
   \   00000008   0x........         DC32 usb_host_mass_device_event
   \   0000000C   0x00 0x00          DC8 0, 0, 0, 0, 8, 6, 80, 0
   \              0x00 0x00    
   \              0x08 0x06    
   \              0x50 0x00    
   \   00000014   0x........         DC32 usb_host_mass_device_event
   \   00000018   0x00 0x00          DC8 0, 0, 0, 0, 9, 0, 0, 0
   \              0x00 0x00    
   \              0x09 0x00    
   \              0x00 0x00    
   \   00000020   0x........         DC32 usb_host_hub_device_event
   \   00000024   0x00 0x00          DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \   0000002C   0x00000000         DC32 0H
     76          {  
     77             /* Vendor ID Product ID Class Sub-Class Protocol Reserved Application call back */
     78             /* Floppy drive */
     79             {{0x00,0x00}, {0x00,0x00}, USB_CLASS_MASS_STORAGE, USB_SUBCLASS_MASS_UFI, USB_PROTOCOL_MASS_BULK, 0, usb_host_mass_device_event },
     80          
     81             /* USB 2.0 hard drive */
     82             {{0x00,0x00}, {0x00,0x00}, USB_CLASS_MASS_STORAGE, USB_SUBCLASS_MASS_SCSI, USB_PROTOCOL_MASS_BULK, 0, usb_host_mass_device_event},
     83          
     84             /* USB hub */
     85             {{0x00,0x00}, {0x00,0x00}, USB_CLASS_HUB, USB_SUBCLASS_HUB_NONE, USB_PROTOCOL_HUB_LS, 0, usb_host_hub_device_event},
     86          
     87             /* End of list */
     88             {{0x00,0x00}, {0x00,0x00}, 0,0,0,0, NULL}
     89          };
     90          
     91          
     92          /*FUNCTION*----------------------------------------------------------------
     93          *
     94          * Function Name  : usb_host_mass_device_event
     95          * Returned Value : None
     96          * Comments       :
     97          *     called when a mass storage device has been attached, detached, etc.
     98          *END*--------------------------------------------------------------------*/
     99          

   \                                 In section .text, align 2, keep-with-next
    100          void usb_host_mass_device_event
    101             (
    102                /* [IN] pointer to device instance */
    103                _usb_device_instance_handle      dev_handle,
    104          
    105                /* [IN] pointer to interface descriptor */
    106                _usb_interface_descriptor_handle intf_handle,
    107          
    108                /* [IN] code number for event causing callback */
    109                uint_32           event_code
    110             )
    111          {
   \                     usb_host_mass_device_event:
   \   00000000   0xB580             PUSH     {R7,LR}
    112             INTERFACE_DESCRIPTOR_PTR   intf_ptr =
                                               ^
Warning[Pe177]: variable "intf_ptr" was declared but never referenced
    113                (INTERFACE_DESCRIPTOR_PTR)intf_handle;
    114          
    115             switch (event_code) {
   \   00000002   0x2A01             CMP      R2,#+1
   \   00000004   0xD006             BEQ.N    ??usb_host_mass_device_event_0
   \   00000006   0xD32E             BCC.N    ??usb_host_mass_device_event_1
   \   00000008   0x2A03             CMP      R2,#+3
   \   0000000A   0xD003             BEQ.N    ??usb_host_mass_device_event_0
   \   0000000C   0xD31D             BCC.N    ??usb_host_mass_device_event_2
   \   0000000E   0x2A04             CMP      R2,#+4
   \   00000010   0xD017             BEQ.N    ??usb_host_mass_device_event_3
   \   00000012   0xE028             B.N      ??usb_host_mass_device_event_1
    116                case USB_CONFIG_EVENT:
    117                   /* Drop through into attach, same processing */
    118                case USB_ATTACH_EVENT:
    119                   if (device.STATE == USB_DEVICE_IDLE ||
    120                      device.STATE == USB_DEVICE_DETACHED)
   \                     ??usb_host_mass_device_event_0:
   \   00000014   0x....             LDR.N    R2,??DataTable1_1
   \   00000016   0x6812             LDR      R2,[R2, #+0]
   \   00000018   0x2A00             CMP      R2,#+0
   \   0000001A   0xD003             BEQ.N    ??usb_host_mass_device_event_4
   \   0000001C   0x....             LDR.N    R2,??DataTable1_1
   \   0000001E   0x6812             LDR      R2,[R2, #+0]
   \   00000020   0x2A05             CMP      R2,#+5
   \   00000022   0xD10D             BNE.N    ??usb_host_mass_device_event_5
    121                   {
    122                      device.DEV_HANDLE = dev_handle;
   \                     ??usb_host_mass_device_event_4:
   \   00000024   0x....             LDR.N    R2,??DataTable1_1
   \   00000026   0x6050             STR      R0,[R2, #+4]
    123                      device.INTF_HANDLE = intf_handle;
   \   00000028   0x....             LDR.N    R0,??DataTable1_1
   \   0000002A   0x6081             STR      R1,[R0, #+8]
    124                      device.STATE = USB_DEVICE_ATTACHED;
   \   0000002C   0x....             LDR.N    R0,??DataTable1_1
   \   0000002E   0x2101             MOVS     R1,#+1
   \   00000030   0x6001             STR      R1,[R0, #+0]
    125                      device.SUPPORTED = TRUE;
   \   00000032   0x....             LDR.N    R0,??DataTable1_1
   \   00000034   0x2101             MOVS     R1,#+1
   \   00000036   0x61C1             STR      R1,[R0, #+28]
    126                      _lwevent_set(&USB_Event,USB_EVENT);
   \   00000038   0x2101             MOVS     R1,#+1
   \   0000003A   0x....             LDR.N    R0,??DataTable1_2
   \   0000003C   0x.... 0x....      BL       _lwevent_set
    127                   }
    128                   break;
   \                     ??usb_host_mass_device_event_5:
   \   00000040   0xE014             B.N      ??usb_host_mass_device_event_6
    129                case USB_INTF_EVENT:
    130                   device.STATE = USB_DEVICE_INTERFACED;
   \                     ??usb_host_mass_device_event_3:
   \   00000042   0x....             LDR.N    R0,??DataTable1_1
   \   00000044   0x2104             MOVS     R1,#+4
   \   00000046   0x6001             STR      R1,[R0, #+0]
    131                   break;
   \   00000048   0xE010             B.N      ??usb_host_mass_device_event_6
    132                case USB_DETACH_EVENT:
    133                   device.DEV_HANDLE = NULL;
   \                     ??usb_host_mass_device_event_2:
   \   0000004A   0x....             LDR.N    R0,??DataTable1_1
   \   0000004C   0x2100             MOVS     R1,#+0
   \   0000004E   0x6041             STR      R1,[R0, #+4]
    134                   device.INTF_HANDLE = NULL;
   \   00000050   0x....             LDR.N    R0,??DataTable1_1
   \   00000052   0x2100             MOVS     R1,#+0
   \   00000054   0x6081             STR      R1,[R0, #+8]
    135                   device.STATE = USB_DEVICE_DETACHED;
   \   00000056   0x....             LDR.N    R0,??DataTable1_1
   \   00000058   0x2105             MOVS     R1,#+5
   \   0000005A   0x6001             STR      R1,[R0, #+0]
    136                   _lwevent_set(&USB_Event,USB_EVENT);
   \   0000005C   0x2101             MOVS     R1,#+1
   \   0000005E   0x....             LDR.N    R0,??DataTable1_2
   \   00000060   0x.... 0x....      BL       _lwevent_set
    137                   break;
   \   00000064   0xE002             B.N      ??usb_host_mass_device_event_6
    138                default:
    139                   device.STATE = USB_DEVICE_IDLE;
   \                     ??usb_host_mass_device_event_1:
   \   00000066   0x....             LDR.N    R0,??DataTable1_1
   \   00000068   0x2100             MOVS     R1,#+0
   \   0000006A   0x6001             STR      R1,[R0, #+0]
    140                   break;
    141             } 
    142          } 
   \                     ??usb_host_mass_device_event_6:
   \   0000006C   0xBD01             POP      {R0,PC}          ;; return
    143          
    144          
    145          /*FUNCTION*----------------------------------------------------------------
    146          *
    147          * Function Name  : USB_task
    148          * Returned Value : None
    149          * Comments       :
    150          *     First function called. This rouine just transfers control to host main
    151          *END*--------------------------------------------------------------------*/
    152          

   \                                 In section .text, align 2, keep-with-next
    153          void USB_task(uint_32 param)
    154          { 
   \                     USB_task:
   \   00000000   0xB538             PUSH     {R3-R5,LR}
    155             _usb_host_handle     host_handle;
    156             USB_STATUS           error;
    157             pointer              usb_fs_handle = NULL;
   \   00000002   0x2400             MOVS     R4,#+0
    158             
    159          #ifdef _USB_DBUG_
    160             printf("\n----------   USB_Task  ----------\n");
   \   00000004   0x....             LDR.N    R0,??DataTable1_3
   \   00000006   0x.... 0x....      BL       _io_printf
    161             printf("\n----------             ----------\n");
   \   0000000A   0x....             LDR.N    R0,??DataTable1_4
   \   0000000C   0x.... 0x....      BL       _io_printf
    162             printf("\n----------             ----------\n");
   \   00000010   0x....             LDR.N    R0,??DataTable1_4
   \   00000012   0x.... 0x....      BL       _io_printf
    163             printf("\n----------      END    ----------\n");
   \   00000016   0x....             LDR.N    R0,??DataTable1_5
   \   00000018   0x.... 0x....      BL       _io_printf
    164          #endif 
    165          
    166          #if DEMO_USE_POOLS && defined(DEMO_MFS_POOL_ADDR) && defined(DEMO_MFS_POOL_SIZE)
    167             _MFS_pool_id = _mem_create_pool((pointer)DEMO_MFS_POOL_ADDR, DEMO_MFS_POOL_SIZE);
    168          #endif
    169          
    170             _lwsem_create(&USB_Stick,0);
   \   0000001C   0x2100             MOVS     R1,#+0
   \   0000001E   0x....             LDR.N    R0,??DataTable1_6
   \   00000020   0x.... 0x....      BL       _lwsem_create
    171             _lwevent_create(&USB_Event,0);
   \   00000024   0x2100             MOVS     R1,#+0
   \   00000026   0x....             LDR.N    R0,??DataTable1_2
   \   00000028   0x.... 0x....      BL       _lwevent_create
    172          
    173             USB_lock();
   \   0000002C   0x.... 0x....      BL       _int_disable
    174             _int_install_unexpected_isr();
   \   00000030   0x.... 0x....      BL       _int_install_unexpected_isr
    175             _usb_host_driver_install(USBCFG_DEFAULT_HOST_CONTROLLER,  (pointer) &_bsp_usb_host_callback_table);
   \   00000034   0x....             LDR.N    R1,??DataTable1_7
   \   00000036   0x2000             MOVS     R0,#+0
   \   00000038   0x.... 0x....      BL       _usb_host_driver_install
    176          
    177             error = _usb_host_init(USBCFG_DEFAULT_HOST_CONTROLLER, 4, &host_handle);
   \   0000003C   0xAA00             ADD      R2,SP,#+0
   \   0000003E   0x2104             MOVS     R1,#+4
   \   00000040   0x2000             MOVS     R0,#+0
   \   00000042   0x.... 0x....      BL       _usb_host_init
   \   00000046   0x0005             MOVS     R5,R0
    178             if (error == USB_OK) {
   \   00000048   0x2D00             CMP      R5,#+0
   \   0000004A   0xD10C             BNE.N    ??USB_task_0
    179                error = _usb_host_driver_info_register(host_handle, (pointer)ClassDriverInfoTable);
   \   0000004C   0x....             LDR.N    R1,??DataTable1_8
   \   0000004E   0x9800             LDR      R0,[SP, #+0]
   \   00000050   0x.... 0x....      BL       _usb_host_driver_info_register
   \   00000054   0x0005             MOVS     R5,R0
    180                if (error == USB_OK) {
   \   00000056   0x2D00             CMP      R5,#+0
   \   00000058   0xD105             BNE.N    ??USB_task_0
    181                   error = _usb_host_register_service(host_handle, USB_SERVICE_HOST_RESUME,NULL);
   \   0000005A   0x2200             MOVS     R2,#+0
   \   0000005C   0x2101             MOVS     R1,#+1
   \   0000005E   0x9800             LDR      R0,[SP, #+0]
   \   00000060   0x.... 0x....      BL       _usb_host_register_service
   \   00000064   0x0005             MOVS     R5,R0
    182                }
    183             }
    184          
    185             USB_unlock();
   \                     ??USB_task_0:
   \   00000066   0x.... 0x....      BL       _int_enable
    186          
    187             if (error == USB_OK) {
   \   0000006A   0x2D00             CMP      R5,#+0
   \   0000006C   0xD00E             BEQ.N    ??USB_task_1
    188                
    189                for ( ; ; ) {
    190                   // Wait for insertion or removal event
    191                   _lwevent_wait_ticks(&USB_Event,USB_EVENT,FALSE,0);
    192          
    193                   if ( device.STATE== USB_DEVICE_ATTACHED) {
    194          
    195                      if (device.SUPPORTED)  {
    196                         error = _usb_hostdev_select_interface(device.DEV_HANDLE,
    197                         device.INTF_HANDLE, (pointer)&device.CLASS_INTF);
    198                         if(error == USB_OK) {
    199                            device.STATE = USB_DEVICE_INTERFACED;
    200          
    201                            USB_handle = (pointer)&device.CLASS_INTF;
    202          
    203                            // Install the file system
    204                            usb_fs_handle = usb_filesystem_install( USB_handle, "USB:","PM_C1:" , "u:" );  //  "PM_C1:" --> 分区    NULL --> 无分区
    205                            if (usb_fs_handle) {
    206                               // signal the application
    207                               _lwsem_post(&USB_Stick);
    208                            }
    209                         }
    210                      } else {
    211                          device.STATE = USB_DEVICE_INTERFACED;
    212                      }
    213                   } else if ( device.STATE==USB_DEVICE_DETACHED) {
    214                      _lwsem_wait(&USB_Stick);
    215                      // remove the file system
    216                     usb_filesystem_uninstall(usb_fs_handle);
    217                   }
    218          
    219                   // clear the event
    220                   _lwevent_clear(&USB_Event,USB_EVENT);
    221                }
    222             }
    223          }
   \   0000006E   0xBD31             POP      {R0,R4,R5,PC}    ;; return
   \                     ??USB_task_2:
   \   00000070   0x....             LDR.N    R0,??DataTable1_1
   \   00000072   0x6800             LDR      R0,[R0, #+0]
   \   00000074   0x2805             CMP      R0,#+5
   \   00000076   0xD105             BNE.N    ??USB_task_3
   \   00000078   0x....             LDR.N    R0,??DataTable1_6
   \   0000007A   0x.... 0x....      BL       _lwsem_wait
   \   0000007E   0x0020             MOVS     R0,R4
   \   00000080   0x.... 0x....      BL       usb_filesystem_uninstall
   \                     ??USB_task_3:
   \   00000084   0x2101             MOVS     R1,#+1
   \   00000086   0x....             LDR.N    R0,??DataTable1_2
   \   00000088   0x.... 0x....      BL       _lwevent_clear
   \                     ??USB_task_1:
   \   0000008C   0x2300             MOVS     R3,#+0
   \   0000008E   0x2200             MOVS     R2,#+0
   \   00000090   0x2101             MOVS     R1,#+1
   \   00000092   0x....             LDR.N    R0,??DataTable1_2
   \   00000094   0x.... 0x....      BL       _lwevent_wait_ticks
   \   00000098   0x....             LDR.N    R0,??DataTable1_1
   \   0000009A   0x6800             LDR      R0,[R0, #+0]
   \   0000009C   0x2801             CMP      R0,#+1
   \   0000009E   0xD1E7             BNE.N    ??USB_task_2
   \   000000A0   0x....             LDR.N    R0,??DataTable1_1
   \   000000A2   0x69C0             LDR      R0,[R0, #+28]
   \   000000A4   0x2800             CMP      R0,#+0
   \   000000A6   0xD01D             BEQ.N    ??USB_task_4
   \   000000A8   0x....             LDR.N    R2,??DataTable1_9
   \   000000AA   0x....             LDR.N    R0,??DataTable1_1
   \   000000AC   0x6881             LDR      R1,[R0, #+8]
   \   000000AE   0x....             LDR.N    R0,??DataTable1_1
   \   000000B0   0x6840             LDR      R0,[R0, #+4]
   \   000000B2   0x.... 0x....      BL       _usb_hostdev_select_interface
   \   000000B6   0x0005             MOVS     R5,R0
   \   000000B8   0x2D00             CMP      R5,#+0
   \   000000BA   0xD1E3             BNE.N    ??USB_task_3
   \   000000BC   0x....             LDR.N    R0,??DataTable1_1
   \   000000BE   0x2104             MOVS     R1,#+4
   \   000000C0   0x6001             STR      R1,[R0, #+0]
   \   000000C2   0x....             LDR.N    R0,??DataTable1_10
   \   000000C4   0x....             LDR.N    R1,??DataTable1_9
   \   000000C6   0x6001             STR      R1,[R0, #+0]
   \   000000C8   0x....             ADR.N    R3,??DataTable1  ;; 0x75, 0x3A, 0x00, 0x00
   \   000000CA   0x....             LDR.N    R2,??DataTable1_11
   \   000000CC   0x....             LDR.N    R1,??DataTable1_12
   \   000000CE   0x....             LDR.N    R0,??DataTable1_10
   \   000000D0   0x6800             LDR      R0,[R0, #+0]
   \   000000D2   0x.... 0x....      BL       usb_filesystem_install
   \   000000D6   0x0004             MOVS     R4,R0
   \   000000D8   0x2C00             CMP      R4,#+0
   \   000000DA   0xD0D3             BEQ.N    ??USB_task_3
   \   000000DC   0x....             LDR.N    R0,??DataTable1_6
   \   000000DE   0x.... 0x....      BL       _lwsem_post
   \   000000E2   0xE7CF             B.N      ??USB_task_3
   \                     ??USB_task_4:
   \   000000E4   0x....             LDR.N    R0,??DataTable1_1
   \   000000E6   0x2104             MOVS     R1,#+4
   \   000000E8   0x6001             STR      R1,[R0, #+0]
   \   000000EA   0xE7CB             B.N      ??USB_task_3

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   0x75 0x3A          DC8      0x75, 0x3A, 0x00, 0x00
   \              0x00 0x00    

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_1:
   \   00000000   0x........         DC32     device

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_2:
   \   00000000   0x........         DC32     USB_Event

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_3:
   \   00000000   0x........         DC32     `?<Constant "\\n----------   USB_Tas...">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_4:
   \   00000000   0x........         DC32     `?<Constant "\\n----------          ...">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_5:
   \   00000000   0x........         DC32     `?<Constant "\\n----------      END ...">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_6:
   \   00000000   0x........         DC32     USB_Stick

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_7:
   \   00000000   0x........         DC32     _bsp_usb_host_callback_table

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_8:
   \   00000000   0x........         DC32     ClassDriverInfoTable

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_9:
   \   00000000   0x........         DC32     device+0xC

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_10:
   \   00000000   0x........         DC32     USB_handle

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_11:
   \   00000000   0x........         DC32     `?<Constant "PM_C1:">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_12:
   \   00000000   0x........         DC32     `?<Constant "USB:">`

   \                                 In section .rodata, align 4
   \                     `?<Constant "\\n----------   USB_Tas...">`:
   \   00000000   0x0A 0x2D          DC8 "\012----------   USB_Task  ----------\012"
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x20    
   \              0x20 0x20    
   \              0x55 0x53    
   \              0x42 0x5F    
   \              0x54 0x61    
   \              0x73 0x6B    
   \              0x20 0x20    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x0A 0x00    

   \                                 In section .rodata, align 4
   \                     `?<Constant "\\n----------          ...">`:
   \   00000000   0x0A 0x2D          DC8 "\012----------             ----------\012"
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x20    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x0A 0x00    

   \                                 In section .rodata, align 4
   \                     `?<Constant "\\n----------      END ...">`:
   \   00000000   0x0A 0x2D          DC8 "\012----------      END    ----------\012"
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x20    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x20 0x45    
   \              0x4E 0x44    
   \              0x20 0x20    
   \              0x20 0x20    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x2D 0x2D    
   \              0x0A 0x00    

   \                                 In section .rodata, align 4
   \                     `?<Constant "USB:">`:
   \   00000000   0x55 0x53          DC8 "USB:"
   \              0x42 0x3A    
   \              0x00         
   \   00000005   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   \                                 In section .rodata, align 4
   \                     `?<Constant "PM_C1:">`:
   \   00000000   0x50 0x4D          DC8 "PM_C1:"
   \              0x5F 0x43    
   \              0x31 0x3A    
   \              0x00         
   \   00000007   0x00               DC8 0

   \                                 In section .rodata, align 4
   \   00000000   0x75 0x3A          DC8 "u:"
   \              0x00         
   \   00000003   0x00               DC8 0
    224          
    225          /* EOF */

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       16  USB_task
             16 -> _int_disable
             16 -> _int_enable
             16 -> _int_install_unexpected_isr
             16 -> _io_printf
             16 -> _lwevent_clear
             16 -> _lwevent_create
             16 -> _lwevent_wait_ticks
             16 -> _lwsem_create
             16 -> _lwsem_post
             16 -> _lwsem_wait
             16 -> _usb_host_driver_info_register
             16 -> _usb_host_driver_install
             16 -> _usb_host_init
             16 -> _usb_host_register_service
             16 -> _usb_hostdev_select_interface
             16 -> usb_filesystem_install
             16 -> usb_filesystem_uninstall
        8  usb_host_mass_device_event
              8 -> _lwevent_set


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       8  ?<Constant "PM_C1:">
       8  ?<Constant "USB:">
      36  ?<Constant "\n----------          ...">
      36  ?<Constant "\n----------      END ...">
      36  ?<Constant "\n----------   USB_Tas...">
       4  ?<Constant "u:">
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable1_10
       4  ??DataTable1_11
       4  ??DataTable1_12
       4  ??DataTable1_2
       4  ??DataTable1_3
       4  ??DataTable1_4
       4  ??DataTable1_5
       4  ??DataTable1_6
       4  ??DataTable1_7
       4  ??DataTable1_8
       4  ??DataTable1_9
      48  ClassDriverInfoTable
      36  USB_Event
      28  USB_Stick
       4  USB_handle
     236  USB_task
      32  device
     110  usb_host_mass_device_event

 
 100 bytes in section .bss
 176 bytes in section .rodata
 398 bytes in section .text
 
 398 bytes of CODE  memory
 176 bytes of CONST memory
 100 bytes of DATA  memory

Errors: none
Warnings: 2
